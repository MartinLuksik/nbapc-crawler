pool:
  name: Azure Pipelines
  vmImage: 'Ubuntu-16.04'

steps:
- task: Docker@0
  displayName: 'Build an image: nbacrawler'
  inputs:
    azureSubscription: 'Pay-As-You-Go (62c50507-6943-4f7d-b1e5-fb6a90aceaa3)'
    azureContainerRegistry: '{"loginServer":"nbapc.azurecr.io", "id" : "/subscriptions/62c50507-6943-4f7d-b1e5-fb6a90aceaa3/resourceGroups/nbapc/providers/Microsoft.ContainerRegistry/registries/nbapc"}'
    dockerFile: Dockerfile
    imageName: 'nbacrawler:latest'

- task: Docker@0
  displayName: 'Push the image to ACR'
  inputs:
    azureSubscription: 'Pay-As-You-Go (62c50507-6943-4f7d-b1e5-fb6a90aceaa3)'
    azureContainerRegistry: '{"loginServer":"nbapc.azurecr.io", "id" : "/subscriptions/62c50507-6943-4f7d-b1e5-fb6a90aceaa3/resourceGroups/nbapc/providers/Microsoft.ContainerRegistry/registries/nbapc"}'
    action: 'Push an image'
    imageName: 'nbacrawler:latest'